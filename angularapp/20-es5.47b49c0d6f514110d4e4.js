function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{oSvz:function(e,t,n){"use strict";n.r(t),n.d(t,"OrganizationRequestsModule",(function(){return O}));var r=n("ofXK"),i=n("tyNb"),a=n("mrSG"),s=n("lJxs"),o=n("vkgz"),c=n("5+tZ"),u=n("fXoL"),b=n("wmAJ"),l=n("fzKE"),d=n("JqCM"),f=n("3Pt+");function p(e,t){if(1&e){var n=u.Tb();u.Sb(0,"li",15),u.ac("click",(function(){u.nc(n);var e=t.$implicit;return u.cc(2).setCurrent(e)})),u.vc(1),u.Rb()}if(2&e){var r=t.$implicit;u.Bb(1),u.xc(" ",r.ownerUsername," ")}}function v(e,t){if(1&e&&(u.Sb(0,"div"),u.Sb(1,"ol"),u.tc(2,p,2,1,"li",14),u.Rb(),u.Rb()),2&e){var n=u.cc();u.Bb(2),u.fc("ngForOf",n.userRequests)}}function h(e,t){1&e&&(u.Sb(0,"label"),u.vc(1,"Nothing requests"),u.Rb())}function g(e,t){if(1&e){var n=u.Tb();u.Sb(0,"li",17),u.ac("click",(function(){u.nc(n);var e=t.$implicit;return u.cc(2).setCurrent(e)})),u.vc(1),u.Rb()}if(2&e){var r=t.$implicit;u.Bb(1),u.wc(r.ownerUsername)}}function m(e,t){if(1&e&&(u.Sb(0,"div"),u.Sb(1,"ol"),u.tc(2,g,2,1,"li",16),u.Rb(),u.Rb()),2&e){var n=u.cc();u.Bb(2),u.fc("ngForOf",n.organizationRequests)}}function R(e,t){1&e&&(u.Sb(0,"label"),u.vc(1,"Nothing requests"),u.Rb())}function S(e,t){if(1&e){var n=u.Tb();u.Sb(0,"div",18),u.Sb(1,"div",3),u.Sb(2,"div",4),u.Sb(3,"div",5),u.Sb(4,"h5",6),u.vc(5,"Do you want approve user's request?"),u.Rb(),u.Rb(),u.Sb(6,"div",8),u.vc(7),u.Rb(),u.Sb(8,"div",10),u.Sb(9,"button",19),u.ac("click",(function(){u.nc(n);var e=u.cc();return e.sendAnswer(!1,null==e.current?null:e.current.id)})),u.vc(10," No "),u.Rb(),u.Sb(11,"button",20),u.ac("click",(function(){u.nc(n);var e=u.cc();return e.sendAnswer(!0,null==e.current?null:e.current.id)})),u.vc(12," Yes "),u.Rb(),u.Rb(),u.Rb(),u.Rb(),u.Rb()}if(2&e){var r=u.cc();u.Bb(7),u.xc(" ",r.current.ownerUsername," ")}}var w,q,y,k=[{path:"",component:(w=function(){function e(t,n,r,i,a){_classCallCheck(this,e),this.organizationService=t,this.properties=n,this.spinner=r,this.activatedRoute=i,this.fb=a,this.createForm=this.fb.group({username:[]})}return _createClass(e,[{key:"ngOnInit",value:function(){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.getRequests();case 1:case"end":return e.stop()}}),e,this)})))}},{key:"sendAnswer",value:function(e,t){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:this.spinner.show(),this.properties.unsubscribe(this.answerSubscription),this.answerSubscription=this.organizationService.answerOffer({offerId:t,answer:e}).subscribe((function(){return Object(a.a)(r,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.spinner.hide(),this.getRequests();case 1:case"end":return e.stop()}}),e,this)})))}));case 1:case"end":return n.stop()}}),n,this)})))}},{key:"getRequests",value:function(){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.spinner.show(),this.properties.unsubscribe(this.getSubscription),this.getSubscription=this.activatedRoute.parent.parent.parent.params.pipe(Object(s.a)((function(e){return e.organizationId})),Object(o.a)((function(e){return t.organizationId=e})),Object(c.a)((function(e){return t.organizationService.getOrganizationOffers(e)}))).subscribe((function(e){return Object(a.a)(t,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.userRequests=e.userRequests,this.organizationRequests=e.organizationRequests,this.spinner.hide();case 1:case"end":return t.stop()}}),t,this)})))}));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"setCurrent",value:function(e){this.current=e}},{key:"onSubmit",value:function(){var e=this;this.properties.unsubscribe(this.createSubscription),this.spinner.show(),this.createSubscription=this.organizationService.createOrganizationRequest({username:this.createForm.value.username,organizationId:this.organizationId}).subscribe((function(t){e.spinner.hide(),e.getRequests()}))}},{key:"ngOnDestroy",value:function(){this.properties.unsubscribe(this.createSubscription),this.properties.unsubscribe(this.getSubscription),this.properties.unsubscribe(this.answerSubscription)}}]),e}(),w.\u0275fac=function(e){return new(e||w)(u.Mb(b.a),u.Mb(l.a),u.Mb(d.c),u.Mb(i.a),u.Mb(f.c))},w.\u0275cmp=u.Gb({type:w,selectors:[["app-organization-requests"]],decls:27,vars:6,consts:[[4,"ngIf"],["type","button","data-toggle","modal","data-target","#createRequest","size","large",1,"btn","btn-primary"],["id","createRequest","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[3,"formGroup"],[1,"modal-body"],["type","text","formControlName","username","placeholder","Username","required","","autofocus",""],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-secondary"],["type","submit","data-dismiss","modal",1,"btn","btn-primary",3,"click"],["class","modal fade","id","answeredRequest","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",4,"ngIf"],["data-toggle","modal","data-target","#answeredRequest",3,"click",4,"ngFor","ngForOf"],["data-toggle","modal","data-target","#answeredRequest",3,"click"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],["id","answeredRequest","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["type","button","data-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(u.Nb(0,"ngx-spinner"),u.Sb(1,"label"),u.vc(2," Users' Requests:\n"),u.Rb(),u.tc(3,v,3,1,"div",0),u.tc(4,h,2,0,"label",0),u.Sb(5,"div"),u.Sb(6,"button",1),u.vc(7," Create Organization Request "),u.Rb(),u.Rb(),u.Sb(8,"label"),u.vc(9," Organization's Requests:\n"),u.Rb(),u.tc(10,m,3,1,"div",0),u.tc(11,R,2,0,"label",0),u.Sb(12,"div",2),u.Sb(13,"div",3),u.Sb(14,"div",4),u.Sb(15,"div",5),u.Sb(16,"h5",6),u.vc(17,"Create request to user."),u.Rb(),u.Rb(),u.Sb(18,"form",7),u.Sb(19,"div",8),u.Nb(20,"input",9),u.Rb(),u.Sb(21,"div",10),u.Sb(22,"button",11),u.vc(23,"No"),u.Rb(),u.Sb(24,"button",12),u.ac("click",(function(){return t.onSubmit()})),u.vc(25,"Yes"),u.Rb(),u.Rb(),u.Rb(),u.Rb(),u.Rb(),u.Rb(),u.tc(26,S,13,1,"div",13)),2&e&&(u.Bb(3),u.fc("ngIf",(null==t.userRequests?null:t.userRequests.length)>0),u.Bb(1),u.fc("ngIf",!t.userRequests||0==(null==t.userRequests?null:t.userRequests.length)),u.Bb(6),u.fc("ngIf",(null==t.organizationRequests?null:t.organizationRequests.length)>0),u.Bb(1),u.fc("ngIf",!t.organizationRequests||0==(null==t.organizationRequests?null:t.organizationRequests.length)),u.Bb(7),u.fc("formGroup",t.createForm),u.Bb(8),u.fc("ngIf",t.current))},directives:[d.a,r.j,f.s,f.k,f.g,f.a,f.j,f.e,f.n,r.i],styles:[""]}),w)}],z=((y=function e(){_classCallCheck(this,e)}).\u0275mod=u.Kb({type:y}),y.\u0275inj=u.Jb({factory:function(e){return new(e||y)},imports:[[i.e.forChild(k)],i.e]}),y),O=((q=function e(){_classCallCheck(this,e)}).\u0275mod=u.Kb({type:q}),q.\u0275inj=u.Jb({factory:function(e){return new(e||q)},imports:[[r.b,z,d.b,f.m]]}),q)}}]);