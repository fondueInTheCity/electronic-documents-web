(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{vL0b:function(t,n,e){"use strict";e.r(n),e.d(n,"DocumentsModule",(function(){return U}));var i=e("ofXK"),o=e("tyNb"),c=e("mrSG"),s=e("fXoL"),r=e("zB+k"),b=e("0jaQ"),u=e("fzKE"),a=e("JqCM");const l=function(t){return["/documents",t]};function d(t,n){if(1&t&&(s.Sb(0,"li",7),s.Sb(1,"a",8),s.vc(2),s.Rb(),s.Rb()),2&t){const t=n.$implicit;s.Bb(1),s.fc("routerLink",s.ic(2,l,t.id)),s.Bb(1),s.wc(t.name)}}function m(t,n){if(1&t&&(s.Sb(0,"li"),s.Sb(1,"a",8),s.vc(2),s.Rb(),s.Rb()),2&t){const t=n.$implicit;s.Bb(1),s.fc("routerLink",s.ic(2,l,t.id)),s.Bb(1),s.wc(t.name)}}function f(t,n){if(1&t&&(s.Sb(0,"li"),s.Sb(1,"a",8),s.vc(2),s.Rb(),s.Rb()),2&t){const t=n.$implicit;s.Bb(1),s.fc("routerLink",s.ic(2,l,t.id)),s.Bb(1),s.wc(t.name)}}function h(t,n){if(1&t&&(s.Sb(0,"li"),s.Sb(1,"a",8),s.vc(2),s.Rb(),s.Rb()),2&t){const t=n.$implicit;s.Bb(1),s.fc("routerLink",s.ic(2,l,t.id)),s.Bb(1),s.wc(t.name)}}function p(t,n){if(1&t&&(s.Sb(0,"div",3),s.vc(1," Join To Me "),s.Nb(2,"br"),s.Sb(3,"ul"),s.tc(4,h,3,4,"li",5),s.Rb(),s.Rb()),2&t){const t=s.cc(2);s.Bb(4),s.fc("ngForOf",null==t.documents?null:t.documents.joinToMeDocuments)}}function g(t,n){if(1&t&&(s.Sb(0,"li"),s.Sb(1,"a",8),s.vc(2),s.Rb(),s.Rb()),2&t){const t=n.$implicit;s.Bb(1),s.fc("routerLink",s.ic(2,l,t.id)),s.Bb(1),s.wc(t.name)}}function S(t,n){if(1&t&&(s.Sb(0,"div",1),s.Sb(1,"div",2),s.Sb(2,"div",3),s.vc(3," Heap "),s.Nb(4,"br"),s.Sb(5,"ul"),s.tc(6,d,3,4,"li",4),s.Rb(),s.Rb(),s.Sb(7,"div",3),s.vc(8," Waiting "),s.Nb(9,"br"),s.Sb(10,"ul"),s.tc(11,m,3,4,"li",5),s.Rb(),s.Rb(),s.Sb(12,"div",3),s.vc(13," In Progress "),s.Nb(14,"br"),s.Sb(15,"ul"),s.tc(16,f,3,4,"li",5),s.Rb(),s.Rb(),s.tc(17,p,5,1,"div",6),s.Sb(18,"div",3),s.vc(19," Answered "),s.Nb(20,"br"),s.Sb(21,"ul"),s.tc(22,g,3,4,"li",5),s.Rb(),s.Rb(),s.Rb(),s.Rb()),2&t){const t=s.cc();s.Bb(6),s.fc("ngForOf",null==t.documents?null:t.documents.heapDocuments),s.Bb(5),s.fc("ngForOf",null==t.documents?null:t.documents.waitingDocuments),s.Bb(5),s.fc("ngForOf",null==t.documents?null:t.documents.progressDocuments),s.Bb(1),s.fc("ngIf",(null==t.documents||null==t.documents.joinToMeDocuments?null:t.documents.joinToMeDocuments.length)>0),s.Bb(5),s.fc("ngForOf",null==t.documents?null:t.documents.answeredDocuments)}}let v=(()=>{class t{constructor(t,n,e,i){this.documentsService=t,this.tokenStorageService=n,this.properties=e,this.spinner=i}ngOnInit(){return Object(c.a)(this,void 0,void 0,(function*(){this.getDocuments()}))}getDocuments(){return Object(c.a)(this,void 0,void 0,(function*(){this.spinner.show(),this.properties.unsubscribe(this.getSubscription),this.getSubscription=this.documentsService.getUserDocumentsInfo(this.tokenStorageService.getId()).subscribe(t=>Object(c.a)(this,void 0,void 0,(function*(){this.documents=t,this.spinner.hide()})))}))}ngOnDestroy(){this.properties.unsubscribe(this.getSubscription)}}return t.\u0275fac=function(n){return new(n||t)(s.Mb(r.a),s.Mb(b.a),s.Mb(u.a),s.Mb(a.c))},t.\u0275cmp=s.Gb({type:t,selectors:[["app-documents"]],decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"row"],[1,"col-sm"],["class","",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["class","col-sm",4,"ngIf"],[1,""],[3,"routerLink"]],template:function(t,n){1&t&&s.tc(0,S,23,5,"div",0),2&t&&s.fc("ngIf",n.documents)},directives:[i.j,i.i,o.d],styles:["ul[_ngcontent-%COMP%]{-webkit-padding-start:0;padding-inline-start:0;list-style-type:none}"]}),t})();var w=e("vkgz"),R=e("5+tZ"),I=e("3Pt+"),N=e("wmAJ");function D(t,n){if(1&t&&(s.Sb(0,"option",15),s.vc(1),s.Rb()),2&t){const t=n.$implicit;s.fc("value",t.id),s.Bb(1),s.wc(t.name)}}function y(t,n){if(1&t){const t=s.Tb();s.Sb(0,"form",6),s.ac("ngSubmit",(function(){return s.nc(t),s.cc(2).onSubmitHeap()})),s.Sb(1,"div",7),s.Sb(2,"div",8),s.Sb(3,"label",9),s.vc(4,"Document Name"),s.Rb(),s.Nb(5,"input",10),s.Rb(),s.Sb(6,"div",8),s.Sb(7,"label",11),s.vc(8,"Roles"),s.Rb(),s.Sb(9,"select",12),s.tc(10,D,2,2,"option",13),s.Rb(),s.Rb(),s.Sb(11,"div",8),s.Sb(12,"button",14),s.vc(13,"Approve Heap Document"),s.Rb(),s.Rb(),s.Rb(),s.Rb()}if(2&t){const t=s.cc(2);s.fc("formGroup",t.heapForm),s.Bb(10),s.fc("ngForOf",t.allRoles)}}function B(t,n){if(1&t&&(s.Sb(0,"form",16),s.Sb(1,"h1"),s.vc(2,"In Waiting"),s.Rb(),s.Sb(3,"div",8),s.Sb(4,"label"),s.vc(5,"Name"),s.Rb(),s.Nb(6,"input",17),s.Rb(),s.Sb(7,"div",8),s.Sb(8,"label"),s.vc(9,"Organization Name"),s.Rb(),s.Nb(10,"input",18),s.Rb(),s.Sb(11,"div",8),s.Sb(12,"label"),s.vc(13,"Count"),s.Rb(),s.Nb(14,"input",19),s.Rb(),s.Rb()),2&t){const t=s.cc(2);s.fc("formGroup",t.waitingForm)}}function j(t,n){if(1&t&&(s.Sb(0,"label"),s.vc(1),s.Rb()),2&t){const t=n.$implicit;s.Bb(1),s.yc("",t.username,": ",t.answer,"")}}function F(t,n){if(1&t&&(s.Sb(0,"div"),s.Sb(1,"h1"),s.vc(2,"In Progress"),s.Rb(),s.Nb(3,"br"),s.Sb(4,"label"),s.vc(5),s.Rb(),s.Nb(6,"br"),s.Sb(7,"label"),s.vc(8),s.Rb(),s.Nb(9,"br"),s.Sb(10,"label"),s.vc(11),s.Rb(),s.Nb(12,"br"),s.tc(13,j,2,2,"label",20),s.Nb(14,"br"),s.Rb()),2&t){const t=s.cc(2);s.Bb(5),s.xc("Document Name: ",t.pendingDocumentView.name,""),s.Bb(3),s.xc("Organization Name: ",t.pendingDocumentView.organizationName,""),s.Bb(3),s.xc("Answers count: ",t.countAnswered,""),s.Bb(2),s.fc("ngForOf",t.pendingDocumentView.answers)}}function O(t,n){if(1&t){const t=s.Tb();s.Sb(0,"button",23),s.ac("click",(function(){return s.nc(t),s.cc(3).downloadFile()})),s.vc(1,"Download File"),s.Rb()}}function M(t,n){if(1&t){const t=s.Tb();s.Sb(0,"button",23),s.ac("click",(function(){return s.nc(t),s.cc(3).openFile()})),s.vc(1,"Open File"),s.Rb()}}function k(t,n){if(1&t){const t=s.Tb();s.Sb(0,"button",24),s.ac("click",(function(){return s.nc(t),s.cc(3).onSubmitJoinToMe(!1)})),s.vc(1,"Deny"),s.Rb()}}function T(t,n){if(1&t){const t=s.Tb();s.Sb(0,"button",24),s.ac("click",(function(){return s.nc(t),s.cc(3).onSubmitJoinToMe(!0)})),s.vc(1,"Approve"),s.Rb()}}function A(t,n){if(1&t&&(s.Sb(0,"div"),s.Sb(1,"h1"),s.vc(2,"Join To Me"),s.Rb(),s.tc(3,O,2,0,"button",21),s.tc(4,M,2,0,"button",21),s.tc(5,k,2,0,"button",22),s.tc(6,T,2,0,"button",22),s.Rb()),2&t){const t=s.cc(2);s.Bb(3),s.fc("ngIf",!t.downloaded),s.Bb(1),s.fc("ngIf",t.downloaded),s.Bb(1),s.fc("ngIf",t.downloaded),s.Bb(1),s.fc("ngIf",t.downloaded)}}function J(t,n){if(1&t&&(s.Sb(0,"label"),s.vc(1),s.Rb()),2&t){const t=n.$implicit;s.Bb(1),s.wc(t)}}function x(t,n){if(1&t&&(s.Sb(0,"div"),s.Sb(1,"h1"),s.vc(2,"In Progress"),s.Rb(),s.Nb(3,"br"),s.Sb(4,"label"),s.vc(5),s.Rb(),s.Nb(6,"br"),s.Sb(7,"label"),s.vc(8),s.Rb(),s.Nb(9,"br"),s.Sb(10,"label"),s.vc(11),s.Rb(),s.Nb(12,"br"),s.tc(13,J,2,1,"label",20),s.Rb()),2&t){const t=s.cc(2);s.Bb(5),s.xc("Document Name: ",t.answeredDocument.name,""),s.Bb(3),s.xc("Organization Name: ",t.answeredDocument.organizationName,""),s.Bb(3),s.xc("Answers count: ",t.countAnswered,""),s.Bb(2),s.fc("ngForOf",t.answeredDocument.joins)}}function G(t,n){if(1&t&&(s.Sb(0,"div",1),s.Sb(1,"div",2),s.tc(2,y,14,2,"form",3),s.tc(3,B,15,1,"form",4),s.tc(4,F,15,4,"div",5),s.tc(5,A,7,4,"div",5),s.tc(6,x,14,4,"div",5),s.Rb(),s.Rb()),2&t){const t=s.cc();s.Bb(2),s.fc("ngIf","HEAP"===t.state),s.Bb(1),s.fc("ngIf","WAITING"===t.state),s.Bb(1),s.fc("ngIf","PENDING"===t.state),s.Bb(1),s.fc("ngIf","JOIN_TO_ME"===t.state),s.Bb(1),s.fc("ngIf","ANSWERED"===t.state)}}const z=[{path:"",component:v},{path:":id",component:(()=>{class t{constructor(t,n,e,i,o,c){this.properties=t,this.fb=n,this.organizationService=e,this.documentService=i,this.activatedRoute=o,this.spinner=c,this.selectedItems=[],this.heapForm=this.fb.group({id:[],organizationId:[],name:[],roles:[this.selectedItems]}),this.waitingForm=this.fb.group({id:[],organizationId:[],organizationName:[],name:[],count:[]}),this.joinToMeForm=this.fb.group({id:[],answer:[]}),this.downloaded=!1,this.fileExists=!1,this.progress=0,this.downloadInProgress=!1,this.dropdownSettings={singleSelection:!1,idField:"id",textField:"name",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:3,allowSearchFilter:!1,limitSelection:null}}ngOnInit(){return Object(c.a)(this,void 0,void 0,(function*(){this.getData()}))}getData(){return Object(c.a)(this,void 0,void 0,(function*(){this.spinner.show(),this.show=!1,this.properties.unsubscribe(this.getSubscription),this.getSubscription=this.activatedRoute.params.pipe(Object(w.a)(t=>this.documentId=t.id),Object(R.a)(t=>this.documentService.getState(this.documentId))).subscribe(t=>{this.state=t,"HEAP"===this.state?this.getSubscription=this.documentService.getHeapDocument(this.documentId).subscribe(t=>{this.heapForm.patchValue(t),this.allRoles=t.allRoles,this.heapDocument=t,this.show=!0,this.spinner.hide()}):"WAITING"===this.state?this.getSubscription=this.documentService.getWaitingDocument(this.documentId).subscribe(t=>{this.waitingForm.patchValue(t),this.waitingDocument=t,this.show=!0,this.spinner.hide()}):"PENDING"===this.state?this.getSubscription=this.documentService.getPendingDocument(this.documentId).subscribe(t=>{this.pendingDocumentView=t,this.countAnswered=t.answers.filter(t=>t.answer).length,this.show=!0,this.spinner.hide()}):"JOIN_TO_ME"===this.state?this.getSubscription=this.documentService.getJoinToMeDocument(this.documentId).subscribe(t=>{this.joinToMeForm.patchValue(t),this.joinToMeDocument=t,this.show=!0,this.spinner.hide()}):"ANSWERED"===this.state&&(this.getSubscription=this.documentService.getAnsweredDocument(this.documentId).subscribe(t=>{this.answeredDocument=t,this.countAnswered=t.joins.length,this.show=!0,this.spinner.hide()}))})}))}onSubmitHeap(){return Object(c.a)(this,void 0,void 0,(function*(){this.spinner.show(),this.properties.unsubscribe(this.getSubscription),this.getSubscription=this.documentService.approveUserHeapDocument(this.heapForm.value).subscribe(t=>{this.state="WAITING",this.spinner.hide(),this.getData()})}))}downloadFile(){return Object(c.a)(this,void 0,void 0,(function*(){this.spinner.show(),this.downloadInProgress=!0,this.documentService.downloadDocumentForCheck(this.documentId).subscribe(t=>{this.createFile(t),this.downloaded=!0,this.downloadInProgress=!1,this.spinner.hide()})}))}onSubmitJoinToMe(t){this.spinner.show(),this.documentService.sendAnswer(this.documentId,{answer:t}).subscribe(t=>{this.spinner.hide(),this.getData()})}createFile(t){const n=URL.createObjectURL(t);window.open(n,"_blank")}openFile(){return Object(c.a)(this,void 0,void 0,(function*(){}))}ngOnDestroy(){this.properties.unsubscribe(this.getSubscription)}onItemSelect(t){console.log(t)}}return t.\u0275fac=function(n){return new(n||t)(s.Mb(u.a),s.Mb(I.c),s.Mb(N.a),s.Mb(r.a),s.Mb(o.a),s.Mb(a.c))},t.\u0275cmp=s.Gb({type:t,selectors:[["app-document-view"]],decls:2,vars:1,consts:[["class","row",4,"ngIf"],[1,"row"],[1,"col-md-12"],["class","d-flex justify-content-center",3,"formGroup","ngSubmit",4,"ngIf"],[3,"formGroup",4,"ngIf"],[4,"ngIf"],[1,"d-flex","justify-content-center",3,"formGroup","ngSubmit"],[1,"list-group","text-center"],[1,"form-group","row"],["for","name",1,"col-form-label"],["id","name","formControlName","name","placeholder","Name","type","text",1,"form-control"],[1,"col-form-label"],["id","roles","formControlName","roles","multiple","",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],["name","submit","type","submit",1,"btn","btn-primary"],[3,"value"],[3,"formGroup"],["type","text","formControlName","name","placeholder","Name","required","","readonly",""],["type","text","formControlName","organizationName","placeholder","Organization Name","required","","readonly",""],["type","text","formControlName","count","placeholder","Count","required","","readonly",""],[4,"ngFor","ngForOf"],[3,"click",4,"ngIf"],["size","large",3,"click",4,"ngIf"],[3,"click"],["size","large",3,"click"]],template:function(t,n){1&t&&(s.Nb(0,"ngx-spinner"),s.tc(1,G,7,5,"div",0)),2&t&&(s.Bb(1),s.fc("ngIf",n.show))},directives:[a.a,i.j,I.s,I.k,I.g,I.a,I.j,I.e,I.p,i.i,I.l,I.r,I.n],styles:[""]}),t})()}];let E=(()=>{class t{}return t.\u0275mod=s.Kb({type:t}),t.\u0275inj=s.Jb({factory:function(n){return new(n||t)},imports:[[o.e.forChild(z)],o.e]}),t})();e("R0Ic"),e("XNiG");let L,P=(()=>{let t=class{};return t.\u0275mod=s.Kb({type:t}),t.\u0275inj=s.Jb({factory:function(n){return new(n||t)},imports:[[i.b]]}),t})();e("LRne"),e("HDdC"),e("DH7j"),e("n6bG"),e("lJxs"),e("VRyK"),e("3N8a"),e("IjjT"),e("quSY"),e("7o/Q"),e("l7GE"),e("ZUHj"),e("z+Ro"),e("pLZG"),e("1G5W"),e("JX91"),e("eIep"),e("jtHE");try{L="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(_){L=!1}let C=(()=>{class t{}return t.\u0275mod=s.Kb({type:t}),t.\u0275inj=s.Jb({factory:function(n){return new(n||t)}}),t})(),H=(()=>{class t{}return t.\u0275mod=s.Kb({type:t}),t.\u0275inj=s.Jb({factory:function(n){return new(n||t)}}),t})(),K=(()=>{class t{}return t.\u0275mod=s.Kb({type:t}),t.\u0275inj=s.Jb({factory:function(n){return new(n||t)}}),t})(),W=(()=>{class t{}return t.\u0275mod=s.Kb({type:t}),t.\u0275inj=s.Jb({factory:function(n){return new(n||t)},imports:[[H,C,K],H,K]}),t})(),V=(()=>{let t=class{};return t.\u0275mod=s.Kb({type:t}),t.\u0275inj=s.Jb({factory:function(n){return new(n||t)},imports:[[i.b]]}),t})(),$=(()=>{let t=class{};return t.\u0275mod=s.Kb({type:t}),t.\u0275inj=s.Jb({factory:function(n){return new(n||t)},imports:[[i.b,P,W,V],P,W]}),t})(),U=(()=>{class t{}return t.\u0275mod=s.Kb({type:t}),t.\u0275inj=s.Jb({factory:function(n){return new(n||t)},imports:[[i.b,E,I.m,a.b,$]]}),t})()}}]);