function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,n,t){return n&&_defineProperties(e.prototype,n),t&&_defineProperties(e,t),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{vL0b:function(e,n,t){"use strict";t.r(n),t.d(n,"DocumentsModule",(function(){return ie}));var i=t("ofXK"),o=t("tyNb"),c=t("mrSG"),r=t("fXoL"),s=t("zB+k"),a=t("0jaQ"),u=t("fzKE"),b=t("JqCM"),l=function(e){return["/documents",e]};function f(e,n){if(1&e&&(r.Sb(0,"li",7),r.Sb(1,"a",8),r.vc(2),r.Rb(),r.Rb()),2&e){var t=n.$implicit;r.Bb(1),r.fc("routerLink",r.ic(2,l,t.id)),r.Bb(1),r.wc(t.name)}}function d(e,n){if(1&e&&(r.Sb(0,"li"),r.Sb(1,"a",8),r.vc(2),r.Rb(),r.Rb()),2&e){var t=n.$implicit;r.Bb(1),r.fc("routerLink",r.ic(2,l,t.id)),r.Bb(1),r.wc(t.name)}}function m(e,n){if(1&e&&(r.Sb(0,"li"),r.Sb(1,"a",8),r.vc(2),r.Rb(),r.Rb()),2&e){var t=n.$implicit;r.Bb(1),r.fc("routerLink",r.ic(2,l,t.id)),r.Bb(1),r.wc(t.name)}}function p(e,n){if(1&e&&(r.Sb(0,"li"),r.Sb(1,"a",8),r.vc(2),r.Rb(),r.Rb()),2&e){var t=n.$implicit;r.Bb(1),r.fc("routerLink",r.ic(2,l,t.id)),r.Bb(1),r.wc(t.name)}}function v(e,n){if(1&e&&(r.Sb(0,"div",3),r.vc(1," Join To Me "),r.Nb(2,"br"),r.Sb(3,"ul"),r.tc(4,p,3,4,"li",5),r.Rb(),r.Rb()),2&e){var t=r.cc(2);r.Bb(4),r.fc("ngForOf",null==t.documents?null:t.documents.joinToMeDocuments)}}function h(e,n){if(1&e&&(r.Sb(0,"li"),r.Sb(1,"a",8),r.vc(2),r.Rb(),r.Rb()),2&e){var t=n.$implicit;r.Bb(1),r.fc("routerLink",r.ic(2,l,t.id)),r.Bb(1),r.wc(t.name)}}function g(e,n){if(1&e&&(r.Sb(0,"div",1),r.Sb(1,"div",2),r.Sb(2,"div",3),r.vc(3," Heap "),r.Nb(4,"br"),r.Sb(5,"ul"),r.tc(6,f,3,4,"li",4),r.Rb(),r.Rb(),r.Sb(7,"div",3),r.vc(8," Waiting "),r.Nb(9,"br"),r.Sb(10,"ul"),r.tc(11,d,3,4,"li",5),r.Rb(),r.Rb(),r.Sb(12,"div",3),r.vc(13," In Progress "),r.Nb(14,"br"),r.Sb(15,"ul"),r.tc(16,m,3,4,"li",5),r.Rb(),r.Rb(),r.tc(17,v,5,1,"div",6),r.Sb(18,"div",3),r.vc(19," Answered "),r.Nb(20,"br"),r.Sb(21,"ul"),r.tc(22,h,3,4,"li",5),r.Rb(),r.Rb(),r.Rb(),r.Rb()),2&e){var t=r.cc();r.Bb(6),r.fc("ngForOf",null==t.documents?null:t.documents.heapDocuments),r.Bb(5),r.fc("ngForOf",null==t.documents?null:t.documents.waitingDocuments),r.Bb(5),r.fc("ngForOf",null==t.documents?null:t.documents.progressDocuments),r.Bb(1),r.fc("ngIf",(null==t.documents||null==t.documents.joinToMeDocuments?null:t.documents.joinToMeDocuments.length)>0),r.Bb(5),r.fc("ngForOf",null==t.documents?null:t.documents.answeredDocuments)}}var S,w=((S=function(){function e(n,t,i,o){_classCallCheck(this,e),this.documentsService=n,this.tokenStorageService=t,this.properties=i,this.spinner=o}return _createClass(e,[{key:"ngOnInit",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.getDocuments();case 1:case"end":return e.stop()}}),e,this)})))}},{key:"getDocuments",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.spinner.show(),this.properties.unsubscribe(this.getSubscription),this.getSubscription=this.documentsService.getUserDocumentsInfo(this.tokenStorageService.getId()).subscribe((function(e){return Object(c.a)(n,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:this.documents=e,this.spinner.hide();case 1:case"end":return n.stop()}}),n,this)})))}));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"ngOnDestroy",value:function(){this.properties.unsubscribe(this.getSubscription)}}]),e}()).\u0275fac=function(e){return new(e||S)(r.Mb(s.a),r.Mb(a.a),r.Mb(u.a),r.Mb(b.c))},S.\u0275cmp=r.Gb({type:S,selectors:[["app-documents"]],decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"row"],[1,"col-sm"],["class","",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["class","col-sm",4,"ngIf"],[1,""],[3,"routerLink"]],template:function(e,n){1&e&&r.tc(0,g,23,5,"div",0),2&e&&r.fc("ngIf",n.documents)},directives:[i.j,i.i,o.d],styles:["ul[_ngcontent-%COMP%]{-webkit-padding-start:0;padding-inline-start:0;list-style-type:none}"]}),S),R=t("vkgz"),I=t("5+tZ"),y=t("3Pt+"),k=t("wmAJ");function N(e,n){if(1&e&&(r.Sb(0,"option",15),r.vc(1),r.Rb()),2&e){var t=n.$implicit;r.fc("value",t.id),r.Bb(1),r.wc(t.name)}}function D(e,n){if(1&e){var t=r.Tb();r.Sb(0,"form",6),r.ac("ngSubmit",(function(){return r.nc(t),r.cc(2).onSubmitHeap()})),r.Sb(1,"div",7),r.Sb(2,"div",8),r.Sb(3,"label",9),r.vc(4,"Document Name"),r.Rb(),r.Nb(5,"input",10),r.Rb(),r.Sb(6,"div",8),r.Sb(7,"label",11),r.vc(8,"Roles"),r.Rb(),r.Sb(9,"select",12),r.tc(10,N,2,2,"option",13),r.Rb(),r.Rb(),r.Sb(11,"div",8),r.Sb(12,"button",14),r.vc(13,"Approve Heap Document"),r.Rb(),r.Rb(),r.Rb(),r.Rb()}if(2&e){var i=r.cc(2);r.fc("formGroup",i.heapForm),r.Bb(10),r.fc("ngForOf",i.allRoles)}}function j(e,n){if(1&e&&(r.Sb(0,"form",16),r.Sb(1,"h1"),r.vc(2,"In Waiting"),r.Rb(),r.Sb(3,"div",8),r.Sb(4,"label"),r.vc(5,"Name"),r.Rb(),r.Nb(6,"input",17),r.Rb(),r.Sb(7,"div",8),r.Sb(8,"label"),r.vc(9,"Organization Name"),r.Rb(),r.Nb(10,"input",18),r.Rb(),r.Sb(11,"div",8),r.Sb(12,"label"),r.vc(13,"Count"),r.Rb(),r.Nb(14,"input",19),r.Rb(),r.Rb()),2&e){var t=r.cc(2);r.fc("formGroup",t.waitingForm)}}function B(e,n){if(1&e&&(r.Sb(0,"label"),r.vc(1),r.Rb()),2&e){var t=n.$implicit;r.Bb(1),r.yc("",t.username,": ",t.answer,"")}}function C(e,n){if(1&e&&(r.Sb(0,"div"),r.Sb(1,"h1"),r.vc(2,"In Progress"),r.Rb(),r.Nb(3,"br"),r.Sb(4,"label"),r.vc(5),r.Rb(),r.Nb(6,"br"),r.Sb(7,"label"),r.vc(8),r.Rb(),r.Nb(9,"br"),r.Sb(10,"label"),r.vc(11),r.Rb(),r.Nb(12,"br"),r.tc(13,B,2,2,"label",20),r.Nb(14,"br"),r.Rb()),2&e){var t=r.cc(2);r.Bb(5),r.xc("Document Name: ",t.pendingDocumentView.name,""),r.Bb(3),r.xc("Organization Name: ",t.pendingDocumentView.organizationName,""),r.Bb(3),r.xc("Answers count: ",t.countAnswered,""),r.Bb(2),r.fc("ngForOf",t.pendingDocumentView.answers)}}function O(e,n){if(1&e){var t=r.Tb();r.Sb(0,"button",23),r.ac("click",(function(){return r.nc(t),r.cc(3).downloadFile()})),r.vc(1,"Download File"),r.Rb()}}function F(e,n){if(1&e){var t=r.Tb();r.Sb(0,"button",23),r.ac("click",(function(){return r.nc(t),r.cc(3).openFile()})),r.vc(1,"Open File"),r.Rb()}}function x(e,n){if(1&e){var t=r.Tb();r.Sb(0,"button",24),r.ac("click",(function(){return r.nc(t),r.cc(3).onSubmitJoinToMe(!1)})),r.vc(1,"Deny"),r.Rb()}}function M(e,n){if(1&e){var t=r.Tb();r.Sb(0,"button",24),r.ac("click",(function(){return r.nc(t),r.cc(3).onSubmitJoinToMe(!0)})),r.vc(1,"Approve"),r.Rb()}}function T(e,n){if(1&e&&(r.Sb(0,"div"),r.Sb(1,"h1"),r.vc(2,"Join To Me"),r.Rb(),r.tc(3,O,2,0,"button",21),r.tc(4,F,2,0,"button",21),r.tc(5,x,2,0,"button",22),r.tc(6,M,2,0,"button",22),r.Rb()),2&e){var t=r.cc(2);r.Bb(3),r.fc("ngIf",!t.downloaded),r.Bb(1),r.fc("ngIf",t.downloaded),r.Bb(1),r.fc("ngIf",t.downloaded),r.Bb(1),r.fc("ngIf",t.downloaded)}}function _(e,n){if(1&e&&(r.Sb(0,"label"),r.vc(1),r.Rb()),2&e){var t=n.$implicit;r.Bb(1),r.wc(t)}}function A(e,n){if(1&e&&(r.Sb(0,"div"),r.Sb(1,"h1"),r.vc(2,"In Progress"),r.Rb(),r.Nb(3,"br"),r.Sb(4,"label"),r.vc(5),r.Rb(),r.Nb(6,"br"),r.Sb(7,"label"),r.vc(8),r.Rb(),r.Nb(9,"br"),r.Sb(10,"label"),r.vc(11),r.Rb(),r.Nb(12,"br"),r.tc(13,_,2,1,"label",20),r.Rb()),2&e){var t=r.cc(2);r.Bb(5),r.xc("Document Name: ",t.answeredDocument.name,""),r.Bb(3),r.xc("Organization Name: ",t.answeredDocument.organizationName,""),r.Bb(3),r.xc("Answers count: ",t.countAnswered,""),r.Bb(2),r.fc("ngForOf",t.answeredDocument.joins)}}function J(e,n){if(1&e&&(r.Sb(0,"div",1),r.Sb(1,"div",2),r.tc(2,D,14,2,"form",3),r.tc(3,j,15,1,"form",4),r.tc(4,C,15,4,"div",5),r.tc(5,T,7,4,"div",5),r.tc(6,A,14,4,"div",5),r.Rb(),r.Rb()),2&e){var t=r.cc();r.Bb(2),r.fc("ngIf","HEAP"===t.state),r.Bb(1),r.fc("ngIf","WAITING"===t.state),r.Bb(1),r.fc("ngIf","PENDING"===t.state),r.Bb(1),r.fc("ngIf","JOIN_TO_ME"===t.state),r.Bb(1),r.fc("ngIf","ANSWERED"===t.state)}}var G,z,P=[{path:"",component:w},{path:":id",component:(G=function(){function e(n,t,i,o,c,r){_classCallCheck(this,e),this.properties=n,this.fb=t,this.organizationService=i,this.documentService=o,this.activatedRoute=c,this.spinner=r,this.selectedItems=[],this.heapForm=this.fb.group({id:[],organizationId:[],name:[],roles:[this.selectedItems]}),this.waitingForm=this.fb.group({id:[],organizationId:[],organizationName:[],name:[],count:[]}),this.joinToMeForm=this.fb.group({id:[],answer:[]}),this.downloaded=!1,this.fileExists=!1,this.progress=0,this.downloadInProgress=!1,this.dropdownSettings={singleSelection:!1,idField:"id",textField:"name",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:3,allowSearchFilter:!1,limitSelection:null}}return _createClass(e,[{key:"ngOnInit",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.getData();case 1:case"end":return e.stop()}}),e,this)})))}},{key:"getData",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.spinner.show(),this.show=!1,this.properties.unsubscribe(this.getSubscription),this.getSubscription=this.activatedRoute.params.pipe(Object(R.a)((function(e){return n.documentId=e.id})),Object(I.a)((function(e){return n.documentService.getState(n.documentId)}))).subscribe((function(e){n.state=e,"HEAP"===n.state?n.getSubscription=n.documentService.getHeapDocument(n.documentId).subscribe((function(e){n.heapForm.patchValue(e),n.allRoles=e.allRoles,n.heapDocument=e,n.show=!0,n.spinner.hide()})):"WAITING"===n.state?n.getSubscription=n.documentService.getWaitingDocument(n.documentId).subscribe((function(e){n.waitingForm.patchValue(e),n.waitingDocument=e,n.show=!0,n.spinner.hide()})):"PENDING"===n.state?n.getSubscription=n.documentService.getPendingDocument(n.documentId).subscribe((function(e){n.pendingDocumentView=e,n.countAnswered=e.answers.filter((function(e){return e.answer})).length,n.show=!0,n.spinner.hide()})):"JOIN_TO_ME"===n.state?n.getSubscription=n.documentService.getJoinToMeDocument(n.documentId).subscribe((function(e){n.joinToMeForm.patchValue(e),n.joinToMeDocument=e,n.show=!0,n.spinner.hide()})):"ANSWERED"===n.state&&(n.getSubscription=n.documentService.getAnsweredDocument(n.documentId).subscribe((function(e){n.answeredDocument=e,n.countAnswered=e.joins.length,n.show=!0,n.spinner.hide()})))}));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"onSubmitHeap",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.spinner.show(),this.properties.unsubscribe(this.getSubscription),this.getSubscription=this.documentService.approveUserHeapDocument(this.heapForm.value).subscribe((function(e){n.state="WAITING",n.spinner.hide(),n.getData()}));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"downloadFile",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.spinner.show(),this.downloadInProgress=!0,this.documentService.downloadDocumentForCheck(this.documentId).subscribe((function(e){n.createFile(e),n.downloaded=!0,n.downloadInProgress=!1,n.spinner.hide()}));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"onSubmitJoinToMe",value:function(e){var n=this;this.spinner.show(),this.documentService.sendAnswer(this.documentId,{answer:e}).subscribe((function(e){n.spinner.hide(),n.getData()}))}},{key:"createFile",value:function(e){var n=URL.createObjectURL(e);window.open(n,"_blank")}},{key:"openFile",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))}},{key:"ngOnDestroy",value:function(){this.properties.unsubscribe(this.getSubscription)}},{key:"onItemSelect",value:function(e){console.log(e)}}]),e}(),G.\u0275fac=function(e){return new(e||G)(r.Mb(u.a),r.Mb(y.c),r.Mb(k.a),r.Mb(s.a),r.Mb(o.a),r.Mb(b.c))},G.\u0275cmp=r.Gb({type:G,selectors:[["app-document-view"]],decls:2,vars:1,consts:[["class","row",4,"ngIf"],[1,"row"],[1,"col-md-12"],["class","d-flex justify-content-center",3,"formGroup","ngSubmit",4,"ngIf"],[3,"formGroup",4,"ngIf"],[4,"ngIf"],[1,"d-flex","justify-content-center",3,"formGroup","ngSubmit"],[1,"list-group","text-center"],[1,"form-group","row"],["for","name",1,"col-form-label"],["id","name","formControlName","name","placeholder","Name","type","text",1,"form-control"],[1,"col-form-label"],["id","roles","formControlName","roles","multiple","",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],["name","submit","type","submit",1,"btn","btn-primary"],[3,"value"],[3,"formGroup"],["type","text","formControlName","name","placeholder","Name","required","","readonly",""],["type","text","formControlName","organizationName","placeholder","Organization Name","required","","readonly",""],["type","text","formControlName","count","placeholder","Count","required","","readonly",""],[4,"ngFor","ngForOf"],[3,"click",4,"ngIf"],["size","large",3,"click",4,"ngIf"],[3,"click"],["size","large",3,"click"]],template:function(e,n){1&e&&(r.Nb(0,"ngx-spinner"),r.tc(1,J,7,5,"div",0)),2&e&&(r.Bb(1),r.fc("ngIf",n.show))},directives:[b.a,i.j,y.s,y.k,y.g,y.a,y.j,y.e,y.p,i.i,y.l,y.r,y.n],styles:[""]}),G)}],E=((z=function e(){_classCallCheck(this,e)}).\u0275mod=r.Kb({type:z}),z.\u0275inj=r.Jb({factory:function(e){return new(e||z)},imports:[[o.e.forChild(P)],o.e]}),z);t("R0Ic"),t("XNiG");var L,H=((L=function e(){_classCallCheck(this,e)}).\u0275mod=r.Kb({type:L}),L.\u0275inj=r.Jb({factory:function(e){return new(e||L)},imports:[[i.b]]}),L);t("LRne"),t("HDdC"),t("DH7j"),t("n6bG"),t("lJxs"),t("VRyK"),t("3N8a"),t("IjjT"),t("quSY"),t("7o/Q"),t("l7GE"),t("ZUHj"),t("z+Ro"),t("pLZG"),t("1G5W"),t("JX91"),t("eIep"),t("jtHE");try{"undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(oe){!1}var K,W,V,$,U,q,X,Z=((X=function e(){_classCallCheck(this,e)}).\u0275mod=r.Kb({type:X}),X.\u0275inj=r.Jb({factory:function(e){return new(e||X)}}),X),Q=((q=function e(){_classCallCheck(this,e)}).\u0275mod=r.Kb({type:q}),q.\u0275inj=r.Jb({factory:function(e){return new(e||q)}}),q),Y=((U=function e(){_classCallCheck(this,e)}).\u0275mod=r.Kb({type:U}),U.\u0275inj=r.Jb({factory:function(e){return new(e||U)}}),U),ee=(($=function e(){_classCallCheck(this,e)}).\u0275mod=r.Kb({type:$}),$.\u0275inj=r.Jb({factory:function(e){return new(e||$)},imports:[[Q,Z,Y],Q,Y]}),$),ne=((V=function e(){_classCallCheck(this,e)}).\u0275mod=r.Kb({type:V}),V.\u0275inj=r.Jb({factory:function(e){return new(e||V)},imports:[[i.b]]}),V),te=((W=function e(){_classCallCheck(this,e)}).\u0275mod=r.Kb({type:W}),W.\u0275inj=r.Jb({factory:function(e){return new(e||W)},imports:[[i.b,H,ee,ne],H,ee]}),W),ie=((K=function e(){_classCallCheck(this,e)}).\u0275mod=r.Kb({type:K}),K.\u0275inj=r.Jb({factory:function(e){return new(e||K)},imports:[[i.b,E,y.m,b.b,te]]}),K)}}]);